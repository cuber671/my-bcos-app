
### 一、 接口设计规则

1. **遵循 RESTful 设计原则** ：动词使用 HTTP 方法（GET/POST/PUT/DELETE），名词使用资源路径。
2. **使用标准 HTTP 状态码** ：如 `200 OK`, `201 Created`, `400 Bad Request`, `401 Unauthorized`, `403 Forbidden`, `500 Internal Server Error`。
3. **响应格式统一** ：结构应包含 `code` (业务状态码), `msg` (提示信息), `data` (数据体)。
4. **分页元数据** ：分页接口必须返回 `total` (总数), `page` (页码), `pageSize` (页长), `pages` (总页数)。
5. **版本控制** ：接口路径必须包含版本号（如 `/api/v1/assets/...`），防止合约或业务升级导致前端崩溃。
6. **字段命名** ：统一使用小驼峰（`camelCase`）或下划线（`snake_case`），且必须与 **Java 实体类**及**合约包装类**的字段命名规范保持一致。

### 二、 错误处理规则

1. **统一错误响应格式** ：包含 `errorCode` 和 `errorStack`（仅限非生产环境）。
2. **业务码体系** ：定义一套清晰的业务错误码（如 `10001: 合约调用失败`, `20002: 用户余额不足`）。
3. **错误日志分级** ：`Warn` 记录用户输入错误，`Error` 记录系统异常、合约执行 `Revert` 等。
4. **脱敏处理** ：严禁在响应体中返回数据库索引、私钥路径或区块链节点的内部 IP。

### 三、 安全规则

1. **认证与授权** ：所有接口默认拦截，使用 JWT 或 OAuth2.0 进行身份校验；敏感操作（如发起链上交易）需二次权限检查。
2. **传输加密** ：全量使用 HTTPS；涉及链上私钥或敏感 Hash 时，应在应用层进行二次非对称加密。
3. **防注入与验证** ：对输入参数进行合法性校验（如字段长度、数字范围），防止 SQL 注入及智能合约溢出攻击。
4. **限流与熔断** ：针对高频查询接口实施 Rate Limiting，防止因前端恶意请求导致区块链节点负载过高。

### 四、 性能与可靠性 (新增)

1. **接口幂等性** ：对于 `POST` 创建资产的接口，必须实现 **幂等机制** （使用 `transactionId`），防止因网络抖动导致同一笔业务多次重复上链。
2. **异步处理** ：由于区块链交易确认有延迟（通常 1-2 秒），**写入类接口**建议采用异步响应模式：先返回交易 Hash，前端通过 WebSocket 或轮询包装类获取执行结果。
3. **超时控制** ：设置合理的超时时间，特别是调用 FISCO BCOS 节点时，防止合约执行过久阻塞主线程。
