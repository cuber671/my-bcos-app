{"details":"信用额度管理智能合约 - V2版本 核心设计原则： 1. 数据精简化与哈希化 - 仅核心数据上链，扩展数据哈希化存储 2. 严格访问控制 - 细粒度权限控制，包括Java后端专用权限 3. 规避栈溢出 - 函数参数<16个，使用struct组织数据 4. 异常处理与状态一致性 - 完整的require验证，遵循Checks-Effects-Interactions模式 5. 充分利用事件 - 所有关键操作触发事件，支持链下监听和同步","events":{"AdminSet(address,address,uint256)":{"details":"管理员设置事件"},"BadDebtCountIncremented(string,uint256)":{"details":"坏账次数增加事件"},"CreditLimitAdjusted(string,uint8,address,uint256,uint256,string)":{"details":"信用额度调整事件"},"CreditLimitCreated(string,address,uint8,uint256,uint256,uint256,bytes32,bytes32)":{"details":"信用额度创建事件"},"CreditLimitExpired(string,uint256)":{"details":"信用额度失效事件"},"CreditLimitFrozen(string,address,string)":{"details":"信用额度冻结事件"},"CreditLimitUnfrozen(string,address,string)":{"details":"信用额度解冻事件"},"CreditLimitUsed(string,uint8,address,uint256,uint256,uint256,uint256,uint256)":{"details":"信用额度使用事件（增强版）"},"JavaBackendSet(address,address,uint256)":{"details":"Java后端设置事件"},"OverdueCountIncremented(string,uint256)":{"details":"逾期次数增加事件"},"RiskLevelUpdated(string,uint8,uint8,string)":{"details":"风险等级更新事件"},"WarningTriggered(string,address,uint256,uint256)":{"details":"预警触发事件"}},"kind":"dev","methods":{"adjustCreditLimit(string,uint8,uint256,string,bytes32)":{"details":"调整信用额度","params":{"adjustType":"调整类型","dataHash":"数据哈希","limitId":"额度ID","newLimit":"新额度","reason":"调整原因"},"returns":{"success":"操作是否成功"}},"constructor":{"details":"构造函数","params":{"_admin":"管理员地址"}},"createCreditLimit(string,address,uint8,uint256,uint256,uint256,uint256,bytes32,bytes32)":{"details":"创建信用额度","params":{"coreDataHash":"核心数据哈希（企业名称、审批原因等）","effectiveDate":"生效日期（仅用于事件记录和验证）","enterprise":"企业地址","expiryDate":"失效日期","extendedDataHash":"扩展数据哈希（风险评估报告、信用评级等）","limitId":"额度ID","limitType":"额度类型","totalLimit":"总额度","warningThreshold":"预警阈值（百分比）"},"returns":{"success":"操作是否成功"}},"creditLimitExists(string)":{"details":"检查信用额度是否存在","params":{"limitId":"额度ID"},"returns":{"exists":"是否存在（通过 enterprise != address(0) 判断）"}},"freezeCreditLimit(string,uint256,string)":{"details":"冻结信用额度","params":{"amount":"冻结金额","limitId":"额度ID","reason":"冻结原因"},"returns":{"success":"操作是否成功"}},"freezeEntireLimit(string,string)":{"details":"冻结整个信用额度","params":{"limitId":"额度ID","reason":"冻结原因"},"returns":{"success":"操作是否成功"}},"getAdjustRecordCount(string)":{"details":"获取额度调整记录数量","params":{"limitId":"额度ID"},"returns":{"count":"记录数量"}},"getCreditLimit(string)":{"details":"获取信用额度完整信息（优化版 - 使用结构体避免栈溢出）","params":{"limitId":"额度ID"},"returns":{"info":"信用额度完整信息结构体"}},"getCreditLimitCount()":{"details":"获取信用额度总数","returns":{"count":"额度总数"}},"getCreditLimitMeta(string)":{"details":"获取额度元数据","params":{"limitId":"额度ID"},"returns":{"coreDataHash":"核心数据哈希","createdAt":"创建时间","extendedDataHash":"扩展数据哈希","updatedAt":"更新时间"}},"getCreditLimitsStatus(string[])":{"details":"批量查询信用额度状态","params":{"limitIds":"额度ID数组"},"returns":{"statuses":"状态数组"}},"getEnterpriseLimits(address)":{"details":"获取企业的所有额度ID","params":{"enterprise":"企业地址"},"returns":{"limitIds":"额度ID数组"}},"getUsageRecordCount(string)":{"details":"获取额度使用记录数量","params":{"limitId":"额度ID"},"returns":{"count":"记录数量"}},"incrementBadDebtCount(string)":{"details":"增加坏账次数","params":{"limitId":"额度ID"},"returns":{"success":"操作是否成功"}},"incrementOverdueCount(string)":{"details":"增加逾期次数","params":{"limitId":"额度ID"},"returns":{"success":"操作是否成功"}},"isCreditLimitActive(string)":{"details":"检查信用额度是否生效","params":{"limitId":"额度ID"},"returns":{"isActive":"是否生效"}},"releaseCredit(string,uint256,string,bytes32)":{"details":"释放信用额度","params":{"amount":"释放金额","businessId":"业务ID","dataHash":"数据哈希","limitId":"额度ID"},"returns":{"success":"操作是否成功"}},"setAdmin(address)":{"details":"设置新管理员","params":{"newAdmin":"新管理员地址"},"returns":{"success":"操作是否成功"}},"setJavaBackend(address)":{"details":"设置Java后端地址","params":{"newBackend":"新的Java后端地址"},"returns":{"success":"操作是否成功"}},"unfreezeCreditLimit(string,uint256,string)":{"details":"解冻信用额度","params":{"amount":"解冻金额","limitId":"额度ID","reason":"解冻原因"},"returns":{"success":"操作是否成功"}},"unfreezeEntireLimit(string,string)":{"details":"解冻整个信用额度","params":{"limitId":"额度ID","reason":"解冻原因"},"returns":{"success":"操作是否成功"}},"updateRiskLevel(string,uint8,string)":{"details":"更新风险等级","params":{"limitId":"额度ID","newRiskLevel":"新风险等级","reason":"更新原因"},"returns":{"success":"操作是否成功"}},"useCredit(string,uint256,string,bytes32)":{"details":"使用信用额度","params":{"amount":"使用金额","businessId":"业务ID","dataHash":"数据哈希","limitId":"额度ID"},"returns":{"success":"操作是否成功"}}},"stateVariables":{"adjustRecords":{"details":"额度调整记录映射"},"admin":{"details":"管理员地址"},"creditLimitCores":{"details":"信用额度核心数据映射"},"creditLimitMetas":{"details":"信用额度元数据映射"},"enterpriseLimits":{"details":"企业的额度列表映射"},"javaBackend":{"details":"Java后端地址"},"limitCount":{"details":"信用额度总数"},"usageRecords":{"details":"额度使用记录映射"}},"title":"CreditLimitV2","version":1}