{"author":"FISCO BCOS Supply Chain Finance Team","custom:security-level":"high","details":"Enterprise Registry 智能合约，管理企业信息的链上注册和查询 遵循 contracts.md 规范： - Dual-Layer Storage (双层存储) 架构 - Stack Too Deep 防护 (使用 struct 封装参数) - 完整 NatSpec 注释 (中文) - RBAC 权限控制 (onlyAdmin 修饰器) - 事件定义 (EnterpriseRegistered, CreditRatingUpdated, CreditLimitUpdated, StatusUpdated)","events":{"AdminSet(address,address,uint256)":{"details":"管理员变更事件","params":{"newAdmin":"新管理员地址 (indexed, 可过滤)","oldAdmin":"原管理员地址 (indexed, 可过滤)","timestamp":"变更时间戳"}},"CreditLimitUpdated(address,uint256,uint256,uint256)":{"details":"授信额度更新事件","params":{"enterpriseAddress":"企业区块链地址 (indexed, 可过滤)","newLimit":"新额度","oldLimit":"原额度","timestamp":"更新时间戳"}},"CreditRatingUpdated(address,uint256,uint256,string,uint256)":{"details":"信用评级更新事件","params":{"enterpriseAddress":"企业区块链地址 (indexed, 可过滤)","newRating":"新评级","oldRating":"原评级","reason":"更新原因","timestamp":"更新时间戳"}},"EnterpriseRegistered(address,string,uint8,uint8,bytes32,uint256)":{"details":"企业注册事件","params":{"creditCode":"统一社会信用代码","enterpriseAddress":"企业区块链地址 (indexed, 可过滤)","metadataHash":"扩展数据哈希","role":"企业角色 (枚举值, indexed, 可过滤)","status":"企业状态 (枚举值, indexed, 可过滤)","timestamp":"注册时间戳"}},"JavaBackendSet(address,address,uint256)":{"details":"Java后端设置事件","params":{"newBackend":"新后端地址 (indexed, 可过滤)","oldBackend":"原后端地址 (indexed, 可过滤)","timestamp":"设置时间戳"}},"StatusUpdated(address,uint256,uint256,string,uint256)":{"details":"企业状态更新事件","params":{"enterpriseAddress":"企业区块链地址 (indexed, 可过滤)","newStatus":"新状态 (枚举值)","oldStatus":"原状态 (枚举值)","reason":"更新原因","timestamp":"更新时间戳"}}},"kind":"dev","methods":{"constructor":{"details":"构造函数","params":{"_admin":"合约管理员地址"}},"getCreditHistoryCount(address)":{"details":"获取信用历史记录数量","params":{"enterpriseAddress":"企业区块链地址"},"returns":{"count":"信用历史记录总数"}},"getEnterprise(address)":{"details":"获取企业信息","params":{"enterpriseAddress":"企业区块链地址"},"returns":{"creditCode":"统一社会信用代码","creditLimit":"授信额度","creditRating":"信用评级","metadataHash":"扩展数据哈希","registeredAt":"注册时间戳","role":"企业角色 (枚举值)","status":"企业状态 (枚举值)","updatedAt":"更新时间戳"}},"getEnterpriseByCreditCode(string)":{"details":"根据统一信用代码查询企业地址","params":{"creditCode":"统一社会信用代码 (18位)"},"returns":{"enterpriseAddress":"企业区块链地址"}},"getEnterpriseList()":{"details":"获取所有企业列表","returns":{"addresses":"企业地址数组"}},"isEnterpriseValid(address)":{"details":"检查企业是否有效","params":{"enterpriseAddress":"企业区块链地址"},"returns":{"isValid":"企业是否有效 (存在 + Active状态)"}},"registerEnterprise((address,string,uint8,bytes32))":{"details":"注册企业信息（简化版）","params":{"input":"企业注册输入参数结构体"},"returns":{"success":"操作是否成功"}},"removeEnterprise(address,string)":{"details":"移除企业 (标记为删除状态)","params":{"enterpriseAddress":"企业区块链地址","reason":"删除原因说明"},"returns":{"success":"操作是否成功"}},"setAdmin(address)":{"details":"设置新管理员","params":{"newAdmin":"新管理员地址"},"returns":{"success":"操作是否成功"}},"setCreditLimit(address,uint256)":{"details":"设置企业授信额度注意：授信额度现在存储在 metadataHash 中，此函数仅触发事件作为记录","params":{"enterpriseAddress":"企业区块链地址","newLimit":"新授信额度 (wei, 保持2位小数精度)"},"returns":{"success":"操作是否成功"}},"setJavaBackend(address)":{"details":"设置Java后端地址","params":{"newBackend":"新的Java后端地址"},"returns":{"success":"操作是否成功"}},"updateCreditRating(address,uint256,string)":{"details":"更新企业信用评级注意：信用评级现在存储在 metadataHash 中，此函数仅更新历史记录计数","params":{"enterpriseAddress":"企业区块链地址","newRating":"新信用评级 (0-100)","reason":"更新原因说明"},"returns":{"success":"操作是否成功"}},"updateEnterpriseStatus(address,uint8,string)":{"details":"更新企业状态","params":{"enterpriseAddress":"企业区块链地址","newStatus":"新状态 (枚举值: 0-5)","reason":"更新原因说明"},"returns":{"success":"操作是否成功"}}},"stateVariables":{"VERSION":{"details":"合约版本号 (便于未来升级)"},"addressIsRegistered":{"details":"企业地址是否存在的映射 (防重复注册)"},"admin":{"details":"合约管理员 (具有注册、更新、删除权限)"},"creditCodeToAddress":{"details":"信用代码到地址的映射 (辅助索引)"},"creditHistoryCounts":{"details":"信用历史记录计数 (辅助统计)"},"enterpriseCount":{"details":"企业数量统计"},"enterpriseList":{"details":"企业列表 (用于批量查询)"},"enterprises":{"details":"企业信息主存储"},"javaBackend":{"details":"Java后端地址 (用于敏感操作)"}},"title":"FISCO BCOS 企业注册合约 V2","version":1}