{"details":"应收账款管理智能合约 - V2版本 核心设计原则： 1. 数据精简化与哈希化 - 仅核心数据上链，扩展数据哈希化存储 2. 严格访问控制 - 细粒度权限控制，包括Java后端专用权限 3. 规避栈溢出 - 函数参数<16个，使用struct组织数据 4. 异常处理与状态一致性 - 完整的require验证，遵循Checks-Effects-Interactions模式 5. 充分利用事件 - 所有关键操作触发事件，支持链下监听和同步","events":{"AdminSet(address,address,uint256)":{"details":"管理员设置事件"},"JavaBackendSet(address,address,uint256)":{"details":"Java后端设置事件"},"OverdueStatusUpdated(string,uint8,uint256)":{"details":"逾期状态更新事件"},"ReceivableCancelled(string,address,uint256)":{"details":"应收账款取消事件"},"ReceivableConfirmed(string,address,uint256)":{"details":"应收账款确认事件"},"ReceivableCreated(string,address,address,uint256,uint256,uint256,bytes32,bytes32)":{"details":"应收账款创建事件"},"ReceivableDefaulted(string,uint256,uint256)":{"details":"应收账款违约事件"},"ReceivableFinanced(string,address,uint256,uint256,uint256)":{"details":"应收账款融资事件"},"ReceivableFrozen(string,address,string)":{"details":"应收账款冻结事件"},"ReceivableRepaid(string,uint256,uint256)":{"details":"应收账款还款事件"},"ReceivableTransferred(string,address,address,uint256,uint256)":{"details":"应收账款转让事件"},"ReceivableUnfrozen(string,address,string)":{"details":"应收账款解冻事件"}},"kind":"dev","methods":{"cancelReceivable(string)":{"details":"取消应收账款","params":{"receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"confirmReceivable(string)":{"details":"核心企业确认应收账款","params":{"receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"constructor":{"details":"构造函数","params":{"_admin":"管理员地址"}},"createReceivable((string,address,address,uint256,uint256,uint256,bytes32))":{"details":"创建应收账款（优化版：使用 calldata 规避栈溢出）"},"financeReceivable((string,address,uint256,uint256,bytes32))":{"details":"应收账款融资（优化版：calldata 传参）","params":{"input":"融资输入参数结构体（存储在 calldata 中，减少栈负载）"}},"freezeReceivable(string,string)":{"details":"冻结应收账款","params":{"reason":"冻结原因","receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"getCoreEnterpriseReceivables(address)":{"details":"获取核心企业的应付账款列表","params":{"coreEnterprise":"核心企业地址"},"returns":{"receivables":"应收账款ID数组"}},"getFinancierReceivables(address)":{"details":"获取金融机构的融资账款列表","params":{"financier":"金融机构地址"},"returns":{"receivables":"应收账款ID数组"}},"getOverdueInfo(string)":{"details":"获取逾期信息","params":{"receivableId":"应收账款ID"},"returns":{"isOverdue":"是否逾期","lastRemindDate":"最后催收日期","level":"逾期等级","overdueDays":"逾期天数","penaltyAmount":"累计罚息金额","remindCount":"催收次数"}},"getReceivableCore(string)":{"details":"获取应收账款核心业务信息 (Part 1)"},"getReceivableCount()":{"details":"获取应收账款总数","returns":{"count":"应收账款总数"}},"getReceivableExtra(string)":{"details":"获取应收账款哈希数据 (Part 2)"},"getReceivablesHolders(string[])":{"details":"批量查询应收账款持有人","params":{"receivableIds":"应收账款ID数组"},"returns":{"holders":"持有人地址数组"}},"getReceivablesStatus(string[])":{"details":"批量查询应收账款状态","params":{"receivableIds":"应收账款ID数组"},"returns":{"statuses":"状态数组"}},"getSupplierReceivables(address)":{"details":"获取供应商的应收账款列表","params":{"supplier":"供应商地址"},"returns":{"receivables":"应收账款ID数组"}},"getTransferHistoryCount(string)":{"details":"获取转让历史数量","params":{"receivableId":"应收账款ID"},"returns":{"count":"转让历史数量"}},"isReceivableExists(string)":{"details":"检查应收账款是否存在","params":{"receivableId":"应收账款ID"},"returns":{"exists":"是否存在（通过 supplier != address(0) 判断）"}},"isReceivableFinanced(string)":{"details":"检查应收账款是否已融资","params":{"receivableId":"应收账款ID"},"returns":{"financed":"是否已融资"}},"isReceivableFrozen(string)":{"details":"检查应收账款是否冻结","params":{"receivableId":"应收账款ID"},"returns":{"frozen":"是否冻结"}},"isReceivableOverdue(string)":{"details":"检查应收账款是否逾期","params":{"receivableId":"应收账款ID"},"returns":{"isOverdue":"是否逾期"}},"markAsDefaulted(string)":{"details":"标记违约","params":{"receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"repayReceivable(string,uint256)":{"details":"还款","params":{"amount":"还款金额（用于事件记录，不存储到结构体）","receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"setAdmin(address)":{"details":"设置新管理员","params":{"newAdmin":"新管理员地址"},"returns":{"success":"操作是否成功"}},"setJavaBackend(address)":{"details":"设置Java后端地址","params":{"newBackend":"新的Java后端地址"},"returns":{"success":"操作是否成功"}},"unfreezeReceivable(string,string)":{"details":"解除冻结应收账款","params":{"reason":"解冻原因","receivableId":"应收账款ID"},"returns":{"success":"操作是否成功"}},"updateOverdueStatus((string,uint8,uint256,bytes32))":{"details":"更新逾期状态（优化版：calldata 传参）"}},"stateVariables":{"admin":{"details":"管理员地址"},"coreEnterpriseReceivables":{"details":"核心企业应付账款列表"},"financierReceivables":{"details":"金融机构融资账款列表"},"javaBackend":{"details":"Java后端地址"},"overdueInfos":{"details":"逾期信息映射"},"receivableCores":{"details":"应收账款核心数据映射"},"receivableCount":{"details":"应收账款总数"},"receivableMetas":{"details":"应收账款元数据映射"},"supplierReceivables":{"details":"供应商应收账款列表"},"transferHistory":{"details":"转让历史记录"}},"title":"ReceivableV2","version":1}