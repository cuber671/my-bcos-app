## 1. **拆分管理合约**

 **合约名称** : `BillSplitV2.sol`

 **核心业务用途** : 票据/仓单的拆分业务链上管理

 **解决什么问题** :

* 将一张大额票据/仓单拆分为多张小额票据/仓单
* 记录拆分关系（父单 → 多个子单）
* 确保拆分后的资产在链上有完整可追溯性
* 防止拆分后的资产被重复使用或双重支付

 **关键功能** :

* 拆分操作上链（父单ID、子单ID列表、拆分数量、拆分时间）
* 拆分关系查询
* 子单关联查询
* 拆分历史记录

---

## 2. **合并管理合约**

 **合约名称** : `BillMergeV2.sol`

 **核心业务用途** : 票据/仓单的合并业务链上管理

 **解决什么问题** :

* 将多张小额票据/仓单合并为一张大额票据/仓单
* 记录合并关系（多个父单 → 一个新单）
* 确保合并后的资产在链上有完整可追溯性

 **关键功能** :

* 合并操作上链（父单ID列表、新单ID、合并时间）
* 合并关系查询
* 合并历史记录

---

## 3. **质押申请管理合约**

 **合约名称** : `PledgeRequestV2.sol`

 **核心业务用途** : 独立的质押申请流程管理

 **解决什么问题** :

* 将质押申请流程独立出来，不与背书系统耦合
* 支持质押申请、批准、拒绝的完整生命周期
* 清晰的质押业务状态流转

 **关键功能** :

* 发起质押申请（仓单ID、金融机构ID、质押金额、质押期限）
* 确认质押申请（批准/拒绝、批准金额、利率）
* 质押申请查询（按状态、申请方、金融机构）
* 质押申请历史记录

---

## 4. **仓单冻结/解冻增强合约**

 **合约名称** : `WarehouseReceiptFreezeV2.sol`

 **核心业务用途** : 专门的冻结/解冻管理

 **解决什么问题** :

* ContractService 中 `freezeReceiptOnChain` 和 `unfreezeReceiptOnChain` 方法尚未在合约中实现
* 提供独立的冻结管理，支持冻结原因记录和目标状态设置
* 支持解冻后的目标状态控制（可恢复正常或其他状态）

 **关键功能** :

* 冻结仓单（仓单ID、冻结原因、相关文件编号）
* 解冻仓单（仓单ID、解冻后目标状态）
* 冻结历史记录
* 冻结原因查询

---

## 5. **仓单作废管理合约**

 **合约名称** : `WarehouseReceiptCancelV2.sol`

 **核心业务用途** : 仓单作废业务链上管理

 **解决什么问题** :

* ContractService 中 `cancelReceiptOnChain` 方法尚未在合约中实现
* 支持仓单作废流程，记录作废原因和时间
* 确保作废操作链上可追溯

 **关键功能** :

* 作废仓单（仓单ID、作废原因）
* 作废历史记录
* 作废原因查询

---

## 6. **仓单变更历史管理合约**

 **合约名称** : `WarehouseReceiptChangeHistoryV2.sol`

 **核心业务用途** : 仓单变更记录和历史查询

 **解决什么问题** :

* 记录仓单的所有变更操作（状态变更、持有人变更、金额变更等）
* 提供完整的变更历史追溯
* 支持变更原因记录

 **关键功能** :

* 记录变更（仓单ID、变更类型、变更前值、变更后值、操作人、变更时间、变更原因）
* 变更历史查询（按仓单ID、类型、时间范围）
* 变更类型枚举（状态变更、持有人变更、金额变更、冻结变更等）

---

## 7. **票据池管理合约**

 **合约名称** : `BillPoolV2.sol`

 **核心业务用途** : 票据池资产管理

 **解决什么问题** :

* 管理票据池中的票据入库、出库
* 支持票据池资产统计和查询
* 确保票据流转链上可追溯

 **关键功能** :

* 票据入库（票据ID、入库时间、入库方）
* 票据出库（票据ID、出库时间、出库方）
* 票据池查询（按状态、类型、时间范围）
* 票据池统计（总量、可融资量、已融资量、已结算量）
